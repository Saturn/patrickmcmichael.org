{"data":{"site":{"siteMetadata":{"title":"patrickmcmichael.org","author":"Patrick McMichael"}},"markdownRemark":{"id":"a425cf09-3302-57a1-924a-488df3835843","excerpt":"If you are building a Flask application that includes user authentication you may have considered adding the ability for users to authenticate using a thirdâ€¦","html":"<p>If you are building a Flask application that includes user authentication you may have considered adding the ability for users to authenticate using a third party account such as Google, Facebook or Twitter.</p>\n<p>I will show one, easy way of doing this which is actually very straightforward.</p>\n<h3>OAuth</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-python line-numbers\"><code class=\"language-python\"><span class=\"token keyword\">import</span> os\n\n<span class=\"token keyword\">from</span> flask <span class=\"token keyword\">import</span> Flask<span class=\"token punctuation\">,</span> render_template<span class=\"token punctuation\">,</span> redirect<span class=\"token punctuation\">,</span> url_for\n<span class=\"token keyword\">from</span> flask_sqlalchemy <span class=\"token keyword\">import</span> SQLAlchemy\n<span class=\"token keyword\">from</span> flask_login <span class=\"token keyword\">import</span> <span class=\"token punctuation\">(</span>LoginManager<span class=\"token punctuation\">,</span> UserMixin<span class=\"token punctuation\">,</span>\n                         current_user<span class=\"token punctuation\">,</span> login_user<span class=\"token punctuation\">,</span> logout_user<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">from</span> flask_dance<span class=\"token punctuation\">.</span>consumer <span class=\"token keyword\">import</span> oauth_authorized\n<span class=\"token keyword\">from</span> flask_dance<span class=\"token punctuation\">.</span>contrib<span class=\"token punctuation\">.</span>google <span class=\"token keyword\">import</span> make_google_blueprint<span class=\"token punctuation\">,</span> google\n<span class=\"token keyword\">from</span> flask_dance<span class=\"token punctuation\">.</span>consumer<span class=\"token punctuation\">.</span>backend<span class=\"token punctuation\">.</span>sqla <span class=\"token keyword\">import</span> <span class=\"token punctuation\">(</span>OAuthConsumerMixin<span class=\"token punctuation\">,</span>\n                                               SQLAlchemyBackend<span class=\"token punctuation\">)</span>\n\n\npath <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>dirname<span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>realpath<span class=\"token punctuation\">(</span>__file__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\ndb_path <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">,</span> <span class=\"token string\">'app.db'</span><span class=\"token punctuation\">)</span>\n\napp <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span>\napp<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">[</span><span class=\"token string\">'SQLALCHEMY_DATABASE_URI'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">'sqlite:///'</span> <span class=\"token operator\">+</span> db_path\napp<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">[</span><span class=\"token string\">'SQLALCHEMY_TRACK_MODIFICATIONS'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">False</span>\napp<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">[</span><span class=\"token string\">'SECRET_KEY'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">'aS3CR3Tk3y'</span>\n\ndb <span class=\"token operator\">=</span> SQLAlchemy<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span>\nlogin_manager <span class=\"token operator\">=</span> LoginManager<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nlogin_manager<span class=\"token punctuation\">.</span>init_app<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span>\nlogin_manager<span class=\"token punctuation\">.</span>login_view <span class=\"token operator\">=</span> <span class=\"token string\">'google.login'</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><img src=\"https://images.pexels.com/photos/814499/pexels-photo-814499.jpeg?auto=compress&#x26;cs=tinysrgb&#x26;dpr=2&#x26;h=750&#x26;w=1260\" alt=\"alt text\" title=\"Logo Title Text 1\"></p>\n<div>\n          <div\n            class=\"gatsby-resp-iframe-wrapper\"\n            style=\"padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden;margin-bottom: 1.0725rem\"\n          >\n            <iframe src=\"https://www.youtube.com/embed/rty2MQZ_eMg\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen style=\"\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n          \"></iframe>\n\n          </div>\n          </div>","frontmatter":{"title":"Signing in with a Google Account with your Flask application","date":"January 19, 2019"}}},"pageContext":{"slug":"/flask-google-login/","previous":{"fields":{"slug":"/hello/"},"frontmatter":{"title":"Hello"}},"next":null}}