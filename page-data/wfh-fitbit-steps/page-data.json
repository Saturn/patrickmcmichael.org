{"componentChunkName":"component---src-templates-blog-post-js","path":"/wfh-fitbit-steps/","result":{"data":{"site":{"siteMetadata":{"title":"patrickmcmichael.org"}},"markdownRemark":{"id":"5da2f8a9-f691-5bdc-97e7-8b454c814d52","excerpt":"Since working from home since the 25th of March 2020 I have wondered how my physical activity has been affected.\nI have worn a Fitbit Charge 2 (most days) sinceâ€¦","html":"<p>Since working from home since the 25th of March 2020 I have wondered how my physical activity has been affected.\nI have worn a Fitbit Charge 2 (most days) since February 2018 so I have a good amount of data to look upon. What I will do is compare total steps for the same period of time for 2020 vs the previous year. I can then see how the average number of steps per day has increased/decreased or any general pattern.</p>\n<p>I will be using the Fitbit API via <a href=\"https://github.com/orcasgit/python-fitbit\">python-fitbit</a> along with <a href=\"https://github.com/pandas-dev/pandas\">Pandas</a> and <a href=\"https://matplotlib.org/\">Matplotlib</a>.</p>\n<h2>Getting the data</h2>\n<h4>Creating Fitbit App</h4>\n<p>In order to use the Fitbit API you will need to create an app and authorize the Fitbit account that you want to read data from. Go to <a href=\"https://dev.fitbit.com/apps/new\">Fitbit Dev App Registration</a> and register a new app. The callback URL is particularly important. I have used <code class=\"language-text\">http://127.0.0.1:8080/</code>. This is what the <a href=\"https://github.com/orcasgit/python-fitbit/blob/master/gather_keys_oauth2.py\">helper script</a> in the Python-Fitbit code expects by default.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 409px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c3026d33fcacfe5de6656b99d46a425e/7a75e/fitbit_app_details.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 110.12658227848102%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAIAAABPIytRAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAC4UlEQVR42o1U227TQBD1V1WIx4pXehXwwDeAisQDQrz0hsoP9Ad4rhAFikBqKyj0QpOmTZymudipk9hu4sRxHN/Wu7Nh7PSSBko5OhqtxjOzM2dWFpTT072dnUz66ODg8CCRkCVp+/tWMplM7CcSv/bzuZMeAqDHee8PCJbbPSwcl89UWVclvWYHfsdzuyRou85ZxzRsq3czBCiq/EuSb6YjbhzxzaPIbomQLPbw8C0DX5OwnoJPe1DS8HYOwC8gsOWPbGQGHr6BB0swMc/H5vnkIkwvhk+X4d4rmHrNpxb5oyV+9zl7ux4lUzaQ7HhUbVDNOKdq0HqLmh1qtCM/Um/2/czsgB9cu5kur9I7z9jkApuYZ+OzbPQlebxEnyzD6AuYXoCxORifg/uzMDbLJubCkRmmnAEqSBkACEw85Svb8DnB1/b5WqK3usc2DulWhq38YHhe3T3n+132YZe++wm2GyWzOJlyaBHfJL4VBm0StALPCQOcDW7iAATie+mDVDaTrWt6Q9O1StVqmVEUZT2GhGEO7FuglLIYly5UAkWBWBj2Twgk8LLZbD5fQCuXy47jeJ7n+z5a13WxdL/cXyGEITHbZjuGZbWbTcOysPGWabYMo0kIuSW5YTQ0TW81MdoYCr2l7cBz8zEURZEkqVFv4LS9/0MkWEhCRhmNSHFYdETOMOwrSW+G4HvuYSolZnP5/ImYyeRyWVEU0+m0KGZKsjw05PDNKAkqjMKite0uioyHbteJbbe/Qn6hA1yHEPi+cqpUVU3X9Xq9rmmaUsHxFV1T0aOqtWq1qmkq+tVaLX6UA8nYdlmSKkqlLEsYWKsopVKpWChgfgdh2/0V2jH48J/EcSutTsN2NMtGqm3bC0hfJ9a/KG6WxQxjkAsIOKVhO5bjmV0HWe90vSDA7/jILrVwrxC9v6tkjIt2FRP3Q6PCAZZvm+bxcU6WSoVCHsfO5XKyLBeL0TjYFAkCQshv5U3B6foB4VcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Fitbit App Details\"\n        title=\"\"\n        src=\"/static/c3026d33fcacfe5de6656b99d46a425e/7a75e/fitbit_app_details.png\"\n        srcset=\"/static/c3026d33fcacfe5de6656b99d46a425e/c26ae/fitbit_app_details.png 158w,\n/static/c3026d33fcacfe5de6656b99d46a425e/6bdcf/fitbit_app_details.png 315w,\n/static/c3026d33fcacfe5de6656b99d46a425e/7a75e/fitbit_app_details.png 409w\"\n        sizes=\"(max-width: 409px) 100vw, 409px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h4>Getting Keys via Python-Fitbit Helper</h4>\n<p>Clone the repo <a href=\"https://github.com/orcasgit/python-fitbit\">python-fitbit</a> and install the required packages.\n<code class=\"language-text\">pip install -r python-fitbit\\requirements\\dev.txt</code></p>\n<p>Run the gather keys helper script, passing in your client id and client secret as arguments. This will launch a browser window taking you to a login screen where you can authorize your Fitbit account with your newly created app.\n<code class=\"language-text\">python gather_keys_oauth2.py CLIENT_ID CLIENT_SECRET</code></p>\n<p>Once you have logged in take a note of the data the script will print to the console.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">TOKEN\n=====\naccess_token = eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIyMkJYOVoiLCJzdWIiOiI2R0NaSksiLCJpc3MiOiJGaXRiaXQiLCJ0eXAiOiJhY2Nlc3NfdG9rZW4iLCJzY29wZXMiOiJyc29jIHJhY3QgcnNldCBybG9jIHJ3ZWkgcmhyIHJudXQgcnBybyByc2xlIiwiZXhwIjoxNjA5Mjk0OTA5LCJpYXQiOjE2MDkyNjYxMDl9.0Q8VdtKNrQeXLJ2fx1kGO993BmTCA9ncRykBnawZL-0\nexpires_in = 28800\nrefresh_token = b051486632f8c6eb30ba9fc6b7ac9b0b6f2ea2cbf6d1fe0770d9baad7151cfd3\nscope = ['heartrate', 'nutrition', 'weight', 'activity', 'sleep', 'settings', 'location', 'social', 'profile']\ntoken_type = Bearer\nuser_id = 6GCZJK\nexpires_at = 1609294914.5506968</code></pre></div>\n<p>You will need to copy the <code class=\"language-text\">access_token</code> and <code class=\"language-text\">refresh_token</code>.</p>\n<h4>Using the Fitbit python library</h4>\n<p>To get all the data I need I do the following.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">f <span class=\"token operator\">=</span> fitbit<span class=\"token punctuation\">.</span>Fitbit<span class=\"token punctuation\">(</span>client_id<span class=\"token punctuation\">,</span> client_secret<span class=\"token punctuation\">,</span> access_token<span class=\"token operator\">=</span>access_token<span class=\"token punctuation\">,</span> refresh_token<span class=\"token operator\">=</span>refresh_token<span class=\"token punctuation\">)</span>\n\nmarch2019 <span class=\"token operator\">=</span> <span class=\"token string\">\"2019-03-25\"</span>\nnovember2019 <span class=\"token operator\">=</span> <span class=\"token string\">\"2019-11-25\"</span>\nmarch2020 <span class=\"token operator\">=</span> <span class=\"token string\">\"2020-03-25\"</span>\nnovember2020 <span class=\"token operator\">=</span> <span class=\"token string\">\"2020-11-25\"</span>\n\nfdata2019 <span class=\"token operator\">=</span> f<span class=\"token punctuation\">.</span>time_series<span class=\"token punctuation\">(</span>STEP_ACTIVITY<span class=\"token punctuation\">,</span> base_date<span class=\"token operator\">=</span>march2019<span class=\"token punctuation\">,</span> end_date<span class=\"token operator\">=</span>november2019<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"activities-steps\"</span><span class=\"token punctuation\">]</span>\nfdata2020 <span class=\"token operator\">=</span> f<span class=\"token punctuation\">.</span>time_series<span class=\"token punctuation\">(</span>STEP_ACTIVITY<span class=\"token punctuation\">,</span> base_date<span class=\"token operator\">=</span>march2020<span class=\"token punctuation\">,</span> end_date<span class=\"token operator\">=</span>november2020<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"activities-steps\"</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>I want to get the data in an easier form for me to work with, so I create some simple helper functions.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">parse_datetime</span><span class=\"token punctuation\">(</span>date_string<span class=\"token punctuation\">,</span> fmt<span class=\"token operator\">=</span><span class=\"token string\">\"%Y-%m-%d\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> datetime<span class=\"token punctuation\">.</span>strptime<span class=\"token punctuation\">(</span>date_string<span class=\"token punctuation\">,</span> fmt<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">parse_fitbit_data</span><span class=\"token punctuation\">(</span>fitbit_data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"\n    Converts number of steps to int and parses string datetime.\n    Adds day and month names.\n    \"\"\"</span>\n    new_fitbit_data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">for</span> day <span class=\"token keyword\">in</span> fitbit_data<span class=\"token punctuation\">:</span>\n        d <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n        d<span class=\"token punctuation\">[</span><span class=\"token string\">\"datetime\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> parse_datetime<span class=\"token punctuation\">(</span>day<span class=\"token punctuation\">[</span><span class=\"token string\">\"dateTime\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        d<span class=\"token punctuation\">[</span><span class=\"token string\">\"steps\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>day<span class=\"token punctuation\">[</span><span class=\"token string\">\"value\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        d<span class=\"token punctuation\">[</span><span class=\"token string\">\"day\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> calendar<span class=\"token punctuation\">.</span>day_name<span class=\"token punctuation\">[</span>d<span class=\"token punctuation\">[</span><span class=\"token string\">\"datetime\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>weekday<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n        d<span class=\"token punctuation\">[</span><span class=\"token string\">\"dayofweek\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> d<span class=\"token punctuation\">[</span><span class=\"token string\">\"datetime\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>weekday<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        d<span class=\"token punctuation\">[</span><span class=\"token string\">\"month\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> calendar<span class=\"token punctuation\">.</span>month_name<span class=\"token punctuation\">[</span>d<span class=\"token punctuation\">[</span><span class=\"token string\">\"datetime\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>month<span class=\"token punctuation\">]</span>\n        new_fitbit_data<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> new_fitbit_data</code></pre></div>\n<p>I can then parse the data returned by the Fitbit API and create a single Pandas DataFrame.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">data2019 <span class=\"token operator\">=</span> parse_fitbit_data<span class=\"token punctuation\">(</span>fdata2019<span class=\"token punctuation\">)</span>\ndata2020 <span class=\"token operator\">=</span> parse_fitbit_data<span class=\"token punctuation\">(</span>fdata2020<span class=\"token punctuation\">)</span>\n\ndf2019 <span class=\"token operator\">=</span> pandas<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span>data2019<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>set_index<span class=\"token punctuation\">(</span><span class=\"token string\">'datetime'</span><span class=\"token punctuation\">)</span>\ndf2020 <span class=\"token operator\">=</span> pandas<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span>data2020<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>set_index<span class=\"token punctuation\">(</span><span class=\"token string\">'datetime'</span><span class=\"token punctuation\">)</span>\n\ndf <span class=\"token operator\">=</span> pandas<span class=\"token punctuation\">.</span>concat<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>df2019<span class=\"token punctuation\">,</span> df2020<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">In [13]: df\nOut[13]:\n            steps        day  dayofweek     month\ndatetime\n2019-03-25   9167     Monday          0     March\n2019-03-26   9176    Tuesday          1     March\n2019-03-27  14875  Wednesday          2     March\n2019-03-28   8012   Thursday          3     March\n2019-03-29  13021     Friday          4     March\n...           ...        ...        ...       ...\n2020-11-21  10050   Saturday          5  November\n2020-11-22   6444     Sunday          6  November\n2020-11-23  11155     Monday          0  November\n2020-11-24  12731    Tuesday          1  November\n2020-11-25  12889  Wednesday          2  November\n\n[492 rows x 4 columns]</code></pre></div>\n<p>I now just need to aggregate the steps, grouping by day of the week.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">mean_steps_df <span class=\"token operator\">=</span> df<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>df<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">.</span><span class=\"token builtin\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> x<span class=\"token punctuation\">.</span>year<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'dayofweek'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nmean_steps_df<span class=\"token punctuation\">[</span><span class=\"token string\">'steps'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> mean_steps_df<span class=\"token punctuation\">[</span><span class=\"token string\">'steps'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>astype<span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>I want to use the actual days of the week names rather than a number, so for that I need to modify the dataframe's index. I am sure there is a nicer way to achieve this.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">mean_steps_df<span class=\"token punctuation\">.</span>index <span class=\"token operator\">=</span> pandas<span class=\"token punctuation\">.</span>MultiIndex<span class=\"token punctuation\">(</span>levels<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>mean_steps_df<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">.</span>levels<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> calendar<span class=\"token punctuation\">.</span>day_name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                                        codes<span class=\"token operator\">=</span>mean_steps_df<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">.</span>codes<span class=\"token punctuation\">,</span>\n                                        names<span class=\"token operator\">=</span>mean_steps_df<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">.</span>names<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">In [24]: mean_steps_df\nOut[24]:\n                    steps\ndatetime dayofweek\n2019     Monday      7318\n         Tuesday     6700\n         Wednesday   7608\n         Thursday    8610\n         Friday     11735\n         Saturday   13289\n         Sunday      9680\n2020     Monday     13104\n         Tuesday    13001\n         Wednesday  11705\n         Thursday   12471\n         Friday     15115\n         Saturday   12089\n         Sunday     12795</code></pre></div>\n<h2>Analysing</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">ax <span class=\"token operator\">=</span> mean_steps_df<span class=\"token punctuation\">.</span>unstack<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>kind<span class=\"token operator\">=</span><span class=\"token string\">'bar'</span><span class=\"token punctuation\">,</span> grid<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> rot<span class=\"token operator\">=</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span>\nax<span class=\"token punctuation\">.</span>set_xlabel<span class=\"token punctuation\">(</span><span class=\"token string\">'Day'</span><span class=\"token punctuation\">)</span>\nax<span class=\"token punctuation\">.</span>set_ylabel<span class=\"token punctuation\">(</span><span class=\"token string\">'Steps'</span><span class=\"token punctuation\">)</span>\nax<span class=\"token punctuation\">.</span>set_title<span class=\"token punctuation\">(</span><span class=\"token string\">'Average Number of Steps Per Day'</span><span class=\"token punctuation\">)</span>\nax<span class=\"token punctuation\">.</span>legend<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'2019'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'2020'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nax<span class=\"token punctuation\">.</span>grid<span class=\"token punctuation\">(</span>alpha<span class=\"token operator\">=</span><span class=\"token number\">0.33</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>savefig<span class=\"token punctuation\">(</span><span class=\"token string\">'steps_2019vs2020_patrickmcmichael.png'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d4658cf2cceaf279ddf5d4cf1ed38218/6af66/steps_2019vs2020_patrickmcmichael.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.31645569620254%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA9hAAAPYQGoP6dpAAADI0lEQVR42n2TaU8bVxSG+aH5EDX50EXK8qFSF1KwcUISNdRKlxCJSkVUCU1aQUowqGFRWkSgIKw6IXgJtnExJp4Zz+JZ7JkxT4/HDmmltlc60ujOPc9533PvGaC/Tk5O6HQ6UXS/bdumUqn8I+qKQqlU5Oi1wmG1hqqqp7lvYqC7EQQBlmVhStiOG8FM04oS6vU6iqJKKDQ0BaVhoOY2UQ5yOHLu8LjO1u4ryqVSdD4C6roeJbRaLkHLlgIhQdsTtSFh2CHsKw98n46cD9duExbXqLpgqlWM/W2qAm40Gn2gfCh6k9afGYLVmwSy5z9NEpjH+H5bikghTwq9TNGSf9ZKkpODZ9xIvaBWehnZbqcfYAs8AjYtE81y8Q52CH6J9YDzHxE4Bu3sEkHmJ/x2G1Ifsvu6zdfXLoOaITE5R3V2KAKGqY9p1go9oCGWVdMRhWnCJ3EkldbCIKFrEewtEOzcw5c2sDxM5rjFWOyiAJ8zIkDtcZy9Bmx/e4lQKzOgaZo0W0UzXZzyDr4oDLsVF6/Qsg0Ons3A7kPm0ofkpi6S1wIBXogUxr6bo7mY4FHWZnLkrDS0wkD3Rrs91MXy+PQM+txnlJuQnbqMY+lcTSYj4JdLOdbvvEdRD0+BcQFaAlwouPwwek6sVnqWTdOgYdoM353Gmh9iseBwL3GWjmcx/PkXEXB8tcDm+PvsC/BWZPktMCXA+9f+BrSbTVHokJjoAZeLLj9ef0d6aBK71QPeWc2zIcBiBLzw/0BLbrmrMDHxAHN+mKV9l4fXzxEIMD6WPFW4cfeDSOFY/FIEHJl8jLl4NbI8PXq+18Mu0PNcDNvjyjffY/z8CQt5m+n4GXxb59PRm/D8PrefZFn/6jwFuZQbg+9CPc3gxIwIGOLRns1U7Iw86HIPGM2u4/H09zTHmVVe1Qy2VmaxjAZrG5uo+S2284dk1+epaRa/Lqfw1Aq/7bzg6I8VckcGm8uzIqA/KW+gpmHgtHw818ay3WieNXlSlqjvwhtGk1DGz3FdfBlJU29ge23a4tC0bGHwFvhvKwzDaIa7yxVIUy6vX/4/c/4ClpgquE6J/DIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Average Steps in 2019 vs 2020\"\n        title=\"\"\n        src=\"/static/d4658cf2cceaf279ddf5d4cf1ed38218/f058b/steps_2019vs2020_patrickmcmichael.png\"\n        srcset=\"/static/d4658cf2cceaf279ddf5d4cf1ed38218/c26ae/steps_2019vs2020_patrickmcmichael.png 158w,\n/static/d4658cf2cceaf279ddf5d4cf1ed38218/6bdcf/steps_2019vs2020_patrickmcmichael.png 315w,\n/static/d4658cf2cceaf279ddf5d4cf1ed38218/f058b/steps_2019vs2020_patrickmcmichael.png 630w,\n/static/d4658cf2cceaf279ddf5d4cf1ed38218/6af66/steps_2019vs2020_patrickmcmichael.png 640w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>This really shows the number of steps on weekdays dramatically increased. Why is this? I think the main reason is because as I have been temporarily working from home it means I no longer have to commute. My previous commute was driving 110+ miles per day so a large part of the day outside of work was spent sitting in a car. When I returned home in the evening, I normally felt pretty drained after the long car journey. It meant I didn't have the desire to be active rather I was more content with resting.</p>\n<p>Now when I finish work, I still have plenty of energy and desire to exercise (go for walk, treadmill etc).</p>\n<p>Interestingly, the number of steps has actually decreased for Saturday. I suggest this is because I get slightly more sleep on that day. And, unlike in 2019 I have no desire to \"make up\" for lack of exercise on the preceding weekdays.</p>\n<h4>Steps Per Month</h4>\n<p>I can quickly get the data per month instead of per day to say if there any patterns. This is a bit annoying since I need to reorder the months as they will be alphabetical by default. I also will use the aggregate the steps by using the sum rather than the mean.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">\nmean_steps_month_df <span class=\"token operator\">=</span> df<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>df<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">.</span><span class=\"token builtin\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> x<span class=\"token punctuation\">.</span>year<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'month'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nmean_steps_month_df<span class=\"token punctuation\">[</span><span class=\"token string\">'steps'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> mean_steps_month_df<span class=\"token punctuation\">[</span><span class=\"token string\">'steps'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>astype<span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span>\nmean_steps_month_df <span class=\"token operator\">=</span> mean_steps_month_df<span class=\"token punctuation\">[</span><span class=\"token string\">'steps'</span><span class=\"token punctuation\">]</span>\n\nmonths <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>month <span class=\"token keyword\">for</span> month <span class=\"token keyword\">in</span> month_name <span class=\"token keyword\">if</span> month <span class=\"token keyword\">in</span> mean_steps_month_df<span class=\"token punctuation\">.</span>unstack<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">]</span>\nax2 <span class=\"token operator\">=</span> mean_steps_month_df<span class=\"token punctuation\">.</span>unstack<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>reindex<span class=\"token punctuation\">(</span>months<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>kind<span class=\"token operator\">=</span><span class=\"token string\">'bar'</span><span class=\"token punctuation\">,</span> grid<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> rot<span class=\"token operator\">=</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span>\nax2<span class=\"token punctuation\">.</span>set_xlabel<span class=\"token punctuation\">(</span><span class=\"token string\">'Month'</span><span class=\"token punctuation\">)</span>\nax2<span class=\"token punctuation\">.</span>set_ylabel<span class=\"token punctuation\">(</span><span class=\"token string\">'Steps'</span><span class=\"token punctuation\">)</span>\nax2<span class=\"token punctuation\">.</span>set_title<span class=\"token punctuation\">(</span><span class=\"token string\">'Total Number of Steps Per Month'</span><span class=\"token punctuation\">)</span>\nax2<span class=\"token punctuation\">.</span>legend<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'2019'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'2020'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nax2<span class=\"token punctuation\">.</span>grid<span class=\"token punctuation\">(</span>alpha<span class=\"token operator\">=</span><span class=\"token number\">0.33</span><span class=\"token punctuation\">)</span>\n\nplt<span class=\"token punctuation\">.</span>grid<span class=\"token punctuation\">(</span>b<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> which<span class=\"token operator\">=</span><span class=\"token string\">'major'</span><span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span><span class=\"token string\">'#666666'</span><span class=\"token punctuation\">,</span> linestyle<span class=\"token operator\">=</span><span class=\"token string\">'-'</span><span class=\"token punctuation\">)</span>\n\nplt<span class=\"token punctuation\">.</span>minorticks_on<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>grid<span class=\"token punctuation\">(</span>b<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> which<span class=\"token operator\">=</span><span class=\"token string\">'minor'</span><span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span><span class=\"token string\">'#999999'</span><span class=\"token punctuation\">,</span> linestyle<span class=\"token operator\">=</span><span class=\"token string\">'-'</span><span class=\"token punctuation\">,</span> alpha<span class=\"token operator\">=</span><span class=\"token number\">0.2</span><span class=\"token punctuation\">)</span>\n\nplt<span class=\"token punctuation\">.</span>tight_layout<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>savefig<span class=\"token punctuation\">(</span><span class=\"token string\">'steps2019vs2020months.png'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/eaa3c767e2272b1c02764d85b7106ee8/6af66/steps2019vs2020months.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.31645569620254%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA9hAAAPYQGoP6dpAAADIElEQVR42n2U61MaVxTA/dP7qelM2k7iF23VFDXWyCM0ydgUkhHtgCQWWR4R5CUICLIsLCywwO7ir/cuE2m+9MzcOZfDvb97nruGkNlsxnw+x3Ecdy0WC/d3rVaj2Wy6utVqU2+2aNTrYt9ybcPhUF7n4eHBvSP1mjSoqkq326Xf7zMejxmNRhiGgar1hV1DFavXaaOWLsW+i6Z16dx3mIwMctUGSr7Mba3q3nWBUqRnEiRfsS0L50HYhm2c2YSF+H8xUnESezhyL87atu3ax+0SWi3LXVs88BXY6XTcNRgM3IPz6Zi5sM/jW8w6JWYyLf07Zpe/C91iXokxG3aZj3XsShTb6GBaDqY5WXkoQTJM6akxnmBJ26ct7G4FuxbH0W6w0wHs+zyO8grrJobdVLDEI444MxuqmGNjCZT5k2tkDDFt8B6HMPoqi8Qu1UKG7PttGsUU9+eH3BYUhgkvdvUcq6HgpP0i7DLdMxGN3mat1+sxmUzcqo6NAaZ44MizTjUd5cPhczKpS45fbfLx7yjpv34jEDqhdvYS6p+Y1RUWGT/5XJa3O09EQlXWZCF0XWcgWsAY6oxFpr0vNymm47x+8ZRcNknIu0kkGiMb8hAMn1CVwLsLmrk4wb11StdfCGx9vwTKkGW5Zf5GwwETAfTtb1DOxHnj+fEReCKBYQ9/fIhQieyTjL6nnI5xuPOMSuGK19sCOBFA2SaWaBPZ3BORVBnyCvjTt8DQEliO7BEI+imkYng9zygXJfDJEvjY2FoPtd1gpGv4D7eXwN2fyX1RCHt/IRI7dz188/FUAPd59y5IMRXF53lORQCDOz+sQpZeStk48FE8PcB/tMt1IoJP5CWtfOb4YJ1Q5BTl+Fd8f4YphHfwB47IX55xsPWUQi7N0cZ3Kw/d6bAdohdJ6tcKqeQ/NG4KKJ/PxOxWySRiFEolqlcXpK/y3AqdzaYp57NcnJ9Sv62SjJ8wNfqrxnaLI2ZzbtlMp1Ns0eCuti0sOT0ix6Y5FQUcofV0ZLv1+zq6mC5N0+jrA/fuN8D/E9M0ReMbj3Mvvy7//Q58lX8BdwI7uznseUoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Average Steps per Month in 2019 vs 2020\"\n        title=\"\"\n        src=\"/static/eaa3c767e2272b1c02764d85b7106ee8/f058b/steps2019vs2020months.png\"\n        srcset=\"/static/eaa3c767e2272b1c02764d85b7106ee8/c26ae/steps2019vs2020months.png 158w,\n/static/eaa3c767e2272b1c02764d85b7106ee8/6bdcf/steps2019vs2020months.png 315w,\n/static/eaa3c767e2272b1c02764d85b7106ee8/f058b/steps2019vs2020months.png 630w,\n/static/eaa3c767e2272b1c02764d85b7106ee8/6af66/steps2019vs2020months.png 640w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Surprisingly, for April I did more steps in 2019 than in 2020. So, I did not necessarily increase the number of steps right away.</p>\n<h2>Conclusion</h2>\n<p>When I had to work from home due to Covid-19 I did consider not having the commute would benefit me hugely. <a href=\"https://www.vox.com/2015/5/20/8629881/commuting-health-happiness\">Long commutes make you fat, tired, and miserable (VOX, 2015)\n</a> is an interesting article which shows the negative effects on people who have longer commutes.</p>\n<p>For me, the long commute was also not always bad. The journey to work forced me to wake up and \"ease in\" to the day rather than sit down at a desk straight away. I often listened to audiobooks or podcasts which passed the time. The journey home was less pleasant as it took longer, and I was already tired from working for the previous seven or eight hours.</p>\n<p>You can look at the code I have used on this <a href=\"https://gist.github.com/Saturn/d71778662f1018598fce47cc7112dcab\">GitHub Gist</a>.</p>","frontmatter":{"title":"How working from home has affected my number of daily steps","date":"December 30, 2020","description":null}},"previous":{"fields":{"slug":"/flask-google-login/"},"frontmatter":{"title":"Adding Google Authentication to your Flask Application"}},"next":null},"pageContext":{"id":"5da2f8a9-f691-5bdc-97e7-8b454c814d52","previousPostId":"e5e53bfe-b72a-5b99-b9ed-2ea24836aaa2","nextPostId":null}},"staticQueryHashes":["1736033691","2114561082"],"slicesMap":{}}